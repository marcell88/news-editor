# prompts.py

# Промпт для анализа авторов
MT_AUTHOR_ANALYSIS_PROMPT = """Ты - эксперт по анализу авторов и их активности.
Проанализируй предоставленный список авторов из публикаций.

**Задача:** 
Сгруппируй всех авторов (учитывая возможные опечатки и варианты написания). 
Для каждой группы:
1. Укажи основное имя автора/группы (самый частый вариант)
2. Оцени частоту встречаемости (вес) от 0.01 до 1.00
3. Сумма всех весов должна быть равна 1.00

**Учти:**
- Одинаковые авторы могут быть написаны с опечатками или разными инициалами
- Сгруппируй похожие имена в одну категорию
- Используй контекстное понимание, а не просто точное совпадение

**Пример авторов на входе:**
- Иванов Иван, Иванов И., И. Иванов, Иванов, Петров П.С., Петров, Сидоров А.А.

**Пример результата:**
[
  {"author": "Иванов Иван", "weight": 0.40},
  {"author": "Петров Петр", "weight": 0.35},
  {"author": "Сидоров Алексей", "weight": 0.25}
]

Верни ТОЛЬКО JSON согласно схеме."""

# Схема для анализа авторов
MT_AUTHOR_SCHEMA = {
    "type": "object",
    "properties": {
        "author_categories": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "author": {
                        "type": "string",
                        "description": "Имя автора/группы авторов (основной вариант)"
                    },
                    "weight": {
                        "type": "number",
                        "description": "Вес категории от 0.01 до 1.00, сумма всех весов = 1.00"
                    }
                },
                "required": ["author", "weight"],
                "additionalProperties": False
            },
            "description": "Массив из 5-10 категорий авторов",
            "minItems": 3,
            "maxItems": 10
        }
    },
    "required": ["author_categories"],
    "additionalProperties": False
}

# Промпт для оценки диверсификации автора
MT_AUTHOR_DIVERSIFICATION_PROMPT = """Ты - эксперт по диверсификации авторов и источников контента.

**Задача:**
Оцени, насколько новый автор способствует диверсификации авторов относительно текущего распределения.

**Текущее распределение MT-авторов (с весами):**
{текст_заменится}

**Новый автор для оценки:**
{текст_заменится}

**Критерии оценки от 1 до 10:**
- 1-2: Автор полностью совпадает с очень активными текущими авторами
- 3-4: Автор похож на существующих (возможно опечатка или вариант)
- 5-6: Автор умеренно новый, частично диверсифицирует авторов
- 7-8: Автор достаточно новый, хорошо диверсифицирует авторов
- 9-10: Автор полностью новый, отлично диверсифицирует авторский состав

**Учти:**
1. Чем выше вес текущего автора, тем меньше баллов за повторение
2. Учитывай возможные опечатки и варианты написания имен
3. Разнообразие авторов важно для объективности контента

Верни ТОЛЬКО JSON согласно схеме."""

# Общая схема для оценки диверсификации автора (аналогичная темам и настроениям)
MT_DIVERSIFICATION_SCHEMA = {
    "type": "object",
    "properties": {
        "diversification_score": {
            "type": "integer",
            "description": "Оценка диверсификации от 1 до 10, где 10 - максимальная диверсификация",
            "minimum": 1,
            "maximum": 10
        },
        "reasoning": {
            "type": "string",
            "description": "Краткое объяснение оценки (1-2 предложения)"
        }
    },
    "required": ["diversification_score", "reasoning"],
    "additionalProperties": False
}

# Промпт для оценки диверсификации темы
LT_TOPIC_DIVERSIFICATION_PROMPT = """Ты - эксперт по контентной стратегии и диверсификации тем.

**Задача:**
Оцени, насколько новая тема способствует диверсификации контента относительно текущего распределения тем.

**Текущее распределение LT-тем (с весами):**
{текст_заменится}

**Новая тема для оценки:**
{текст_заменится}

**Критерии оценки от 1 до 10:**
- 1-2: Тема полностью повторяет очень популярные текущие темы
- 3-4: Тема близка к существующим, но с небольшими отличиями  
- 5-6: Тема умеренно новая, частично диверсифицирует контент
- 7-8: Тема достаточно новая, хорошо диверсифицирует контент
- 9-10: Тема полностью новая, отлично диверсифицирует контент, заполняет пробелы

**Учти:**
1. Чем выше вес текущей темы, тем меньше баллов за повторение
2. Если тема совершенно новая (нет в текущих категориях) - ставь высокие баллы
3. Учитывай семантическую близость, а не только точное совпадение слов

Верни ТОЛЬКО JSON согласно схеме."""

# Промпт для оценки диверсификации настроения
LT_MOOD_DIVERSIFICATION_PROMPT = """Ты - эксперт по эмоциональной диверсификации контента.

**Задача:**
Оцени, насколько новое настроение способствует эмоциональной диверсификации относительно текущего распределения настроений.

**Текущее распределение LT-настроений (с весами):**
{текст_заменится}

**Новое настроение для оценки:**
{текст_заменится}

**Критерии оценки от 1 до 10:**
- 1-2: Настроение полностью повторяет доминирующие текущие эмоции
- 3-4: Настроение близко к существующим, но с небольшими отличиями  
- 5-6: Настроение умеренно новое, частично диверсифицирует эмоциональную палитру
- 7-8: Настроение достаточно новое, хорошо диверсифицирует эмоции
- 9-10: Настроение полностью новое, отлично диверсифицирует эмоциональный спектр

**Учти:**
1. Эмоции могут быть сходными даже при разных формулировках
2. Разнообразие эмоций важно для вовлечения аудитории
3. Слишком радикальные эмоции могут быть нежелательными

Верни ТОЛЬКО JSON согласно схеме."""

# Общая схема для оценки диверсификации
LT_DIVERSIFICATION_SCHEMA = {
    "type": "object",
    "properties": {
        "diversification_score": {
            "type": "integer",
            "description": "Оценка диверсификации от 1 до 10, где 10 - максимальная диверсификация",
            "minimum": 1,
            "maximum": 10
        },
        "reasoning": {
            "type": "string",
            "description": "Краткое объяснение оценки (1-2 предложения)"
        }
    },
    "required": ["diversification_score", "reasoning"],
    "additionalProperties": False
}

# Промпт для анализа настроений
LT_MOOD_ANALYSIS_PROMPT = """Ты - эксперт по анализу эмоционального состояния аудитории.
Проанализируй предоставленный список настроений и эмоций из комментариев пользователей.

**Задача:** 
Сгруппируй все настроения в 5-10 основных эмоциональных категорий. Для каждой категории:
1. Укажи название эмоциональной категории
2. Оцени частоту встречаемости (вес) от 0.01 до 1.00
3. Сумма всех весов должна быть равна 1.00

**Пример настроений на входе:**
- возмущение, недовольство, разочарование
- радость, восторг, восхищение  
- тревога, беспокойство, страх
- ирония, сарказм, насмешка
- нейтрально, без эмоций, равнодушие

**Пример результата:**
[
  {"mood": "Негативные эмоции (возмущение, разочарование)", "weight": 0.35},
  {"mood": "Позитивные эмоции (радость, восхищение)", "weight": 0.25},
  {"mood": "Тревога и беспокойство", "weight": 0.15},
  {"mood": "Ирония и сарказм", "weight": 0.15},
  {"mood": "Нейтральные и безэмоциональные", "weight": 0.10}
]

Верни ТОЛЬКО JSON согласно схеме."""

# Схема для анализа настроений
LT_MOOD_SCHEMA = {
    "type": "object",
    "properties": {
        "mood_categories": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "mood": {
                        "type": "string",
                        "description": "Название эмоциональной категории с примерами"
                    },
                    "weight": {
                        "type": "number",
                        "description": "Вес категории от 0.01 до 1.00, сумма всех весов = 1.00"
                    }
                },
                "required": ["mood", "weight"],
                "additionalProperties": False
            },
            "description": "Массив из 5-10 категорий настроений",
            "minItems": 5,
            "maxItems": 10
        }
    },
    "required": ["mood_categories"],
    "additionalProperties": False
}

# Промпт для анализа тем (оставляем как было)
LT_TOPIC_ANALYSIS_PROMPT = """Ты - эксперт по анализу тем и трендов.
Проанализируй предоставленный список тем из комментариев пользователей.

**Задача:** 
Сгруппируй все темы в 5-10 основных категорий. Для каждой категории:
1. Укажи название тематической категории
2. Оцени частоту встречаемости (вес) от 0.01 до 1.00
3. Сумма всех весов должна быть равна 1.00

**Пример тем на входе:**
- технологии, искусственный интеллект, нейросети
- политика, выборы, власть
- экономика, финансы, кризис
- экология, природа, климат
- здоровье, медицина, болезни

**Пример результата:**
[
  {"topic": "Технологии и ИИ", "weight": 0.30},
  {"topic": "Политика и власть", "weight": 0.25},
  {"topic": "Экономика и финансы", "weight": 0.20},
  {"topic": "Экология и природа", "weight": 0.15},
  {"topic": "Здоровье и медицина", "weight": 0.10}
]

Верни ТОЛЬКО JSON согласно схеме."""

# Схема для анализа тем (оставляем как было)
LT_TOPIC_SCHEMA = {
    "type": "object",
    "properties": {
        "topic_categories": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "topic": {
                        "type": "string",
                        "description": "Название тематической категории"
                    },
                    "weight": {
                        "type": "number",
                        "description": "Вес категории от 0.01 до 1.00, сумма всех весов = 1.00"
                    }
                },
                "required": ["topic", "weight"],
                "additionalProperties": False
            },
            "description": "Массив из 5-10 категорий тем",
            "minItems": 5,
            "maxItems": 10
        }
    },
    "required": ["topic_categories"],
    "additionalProperties": False
}